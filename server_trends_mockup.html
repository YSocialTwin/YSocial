<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Trends Analysis - UI Mockup</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f5f5;
            padding: 20px;
            margin: 0;
        }
        .dashboard-box {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }
        .subtitle {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 1.5rem;
        }
        .aggregation-selector {
            margin-bottom: 1em;
            padding: 1em;
            background: #f9f9f9;
            border-radius: 4px;
        }
        .aggregation-selector label {
            font-weight: 600;
            margin-right: 1em;
        }
        .columns {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        .column {
            flex: 1;
        }
        .chart-container {
            position: relative;
            height: 300px;
        }
        .forecast-section {
            margin-top: 1em;
            padding: 1em;
            background: #e8f4f8;
            border-radius: 4px;
            border-left: 4px solid #039be5;
        }
        .forecast-section h4 {
            margin-bottom: 0.5em;
            color: #0277bd;
            font-size: 1rem;
        }
        .forecast-content {
            font-size: 0.9em;
            color: #555;
        }
        .forecast-content p {
            margin: 0.25em 0;
        }
        .forecast-highlight {
            font-size: 1.1em;
            color: #0277bd;
        }
    </style>
</head>
<body>
    <div class="dashboard-box">
        <h3 class="title">Server Trends Analysis</h3>
        <p class="subtitle">Trend analysis of server compute time and simulation time progression.</p>

        <div class="aggregation-selector">
            <label>Aggregation:</label>
            <div style="display: inline-block;">
                <label style="margin-right: 1em; cursor: pointer;">
                    <input type="radio" name="aggregation" value="daily" checked> Daily
                </label>
                <label style="cursor: pointer;">
                    <input type="radio" name="aggregation" value="hourly"> Hourly
                </label>
            </div>
        </div>

        <div class="columns">
            <div class="column">
                <h4 class="subtitle" style="margin-bottom: 1em;">Server Compute Time Trend</h4>
                <div class="chart-container">
                    <canvas id="computeTimeTrendChart"></canvas>
                </div>
            </div>
            <div class="column">
                <h4 class="subtitle" style="margin-bottom: 1em;">Simulation Time Trend</h4>
                <div class="chart-container">
                    <canvas id="simulationTimeTrendChart"></canvas>
                </div>
            </div>
        </div>

        <div class="forecast-section">
            <h4>⏱️ Remaining Time Forecast</h4>
            <div class="forecast-content">
                <p><strong>Total simulation time so far:</strong> <span id="elapsed">2h 3m 41s</span></p>
                <p><strong>Average time per slot:</strong> <span id="avg">41m 14s</span></p>
                <p><strong>Remaining slots:</strong> <span id="slots">7</span></p>
                <p class="forecast-highlight"><strong>Estimated remaining time:</strong> <span id="remaining">4h 48m 38s</span></p>
            </div>
        </div>
    </div>

    <script>
        // Sample data for daily aggregation
        const dailyData = {
            compute: [2.155, 2.219, 1.466],
            simulation: [7221, 10233, 3317],
            labels: ['Day 1', 'Day 2', 'Day 3']
        };

        // Sample data for hourly aggregation
        const hourlyData = {
            compute: [0.69, 0.466, 0.999, 0.485, 1.166, 0.568, 0.865, 0.601],
            simulation: [322, 921, 623, 1511, 1958, 2133, 1828, 0],
            labels: ['D1H8', 'D1H9', 'D1H10', 'D2H8', 'D2H9', 'D2H10', 'D3H8', 'D3H9']
        };

        let currentAggregation = 'daily';
        let computeChart = null;
        let simulationChart = null;

        function updateCharts() {
            const data = currentAggregation === 'daily' ? dailyData : hourlyData;

            // Update or create compute time chart
            if (computeChart) {
                computeChart.data.labels = data.labels;
                computeChart.data.datasets[0].data = data.compute;
                computeChart.update();
            } else {
                computeChart = new Chart('computeTimeTrendChart', {
                    type: 'line',
                    data: {
                        labels: data.labels,
                        datasets: [{
                            label: 'Compute Time (s)',
                            data: data.compute,
                            borderColor: 'rgba(33, 150, 243, 1)',
                            backgroundColor: 'rgba(33, 150, 243, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: true }
                        },
                        scales: {
                            y: { beginAtZero: true }
                        }
                    }
                });
            }

            // Update or create simulation time chart
            if (simulationChart) {
                simulationChart.data.labels = data.labels;
                simulationChart.data.datasets[0].data = data.simulation;
                simulationChart.update();
            } else {
                simulationChart = new Chart('simulationTimeTrendChart', {
                    type: 'line',
                    data: {
                        labels: data.labels,
                        datasets: [{
                            label: 'Simulation Time (s)',
                            data: data.simulation,
                            borderColor: 'rgba(76, 175, 80, 1)',
                            backgroundColor: 'rgba(76, 175, 80, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: true }
                        },
                        scales: {
                            y: { beginAtZero: true }
                        }
                    }
                });
            }
        }

        // Initialize charts
        updateCharts();

        // Handle aggregation change
        document.querySelectorAll('input[name="aggregation"]').forEach(radio => {
            radio.addEventListener('change', function() {
                currentAggregation = this.value;
                updateCharts();
            });
        });
    </script>
</body>
</html>
