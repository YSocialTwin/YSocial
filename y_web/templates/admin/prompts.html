{% include "admin/head.html" %}

<div class="view-wrapper is-dashboard">
    <!--Dashboard container-->
    <div id="creator-dashboard" class="dashboard-container">
        <!--Toolbar-->
        {% include "admin/dash_head.html" %}


        <div class="dashboard-body">

            <div class="columns">
                <div class="column is-12">
                    <div class="dashboard-box">
                        <a href="/admin/experiments">Experiments</a> > Simulation: <a href="">{{ experiment.exp_name }}</a> > Prompts
                    </div>
                </div>
            </div>

            <div class="columns">
                <!--Dashboard column-->
                <div class="column is-8">

                    {% for message in get_flashed_messages() %}
                    <div class="alert alert-warning">
                        <button type="button" class="close" data-dismiss="alert">&times;</button>
                        {{ message }}
                    </div>
                    {% endfor %}

                    <!--Dashboard box-->
                    <div class="dashboard-box">
                        <h3 class="title is-5 is-thin">LLM Prompts</h3>
                        <div class="box-content">
                            <form action="/admin/update_prompts/{{ experiment.idexp }}" enctype="multipart/form-data" method="POST">
                                <div class="box-lines">
                                    <h4 class="title is-6 is-thin">Agents Pre-prompts</h4>
                                    <div class="box-line">
                                        <span class="left">Roleplay</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="6" name="agent_roleplay" class="textarea">{{ prompts['agent_roleplay'] }}</textarea>
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left">Roleplay (base)</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="2" name="agent_roleplay_base" class="textarea">{{ prompts['agent_roleplay_base'] }}</textarea>
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left">Roleplay (simple)</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="4" name="agent_roleplay_simple" class="textarea">{{ prompts['agent_roleplay_simple'] }}</textarea>
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left">Roleplay (Comment & Share)</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="10" name="agent_roleplay_comments_share" class="textarea">{{ prompts['agent_roleplay_comments_share'] }}</textarea>
                                        </span>
                                    </div>
                                    <hr>
                                    <h4 class="title is-6 is-thin">Page Pre-prompts</h4>
                                    <div class="box-line">
                                        <span class="left">Roleplay</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="2" name="page_roleplay" class="textarea">{{ prompts['page_roleplay'] }}</textarea>
                                        </span>
                                    </div>
                                    <hr>
                                    <h4 class="title is-6 is-thin">Handler Pre-prompts</h4>
                                    <div class="box-line">
                                        <span class="left">Instructions</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="7" name="handler_instructions" class="textarea">{{ prompts['handler_instructions'] }}</textarea>
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left">Instructions (simple)</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="2" name="handler_instructions_simple" class="textarea">{{ prompts['handler_instructions_simple'] }}</textarea>
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left">Instructions (Topics)</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="5" name="handler_instructions_topics" class="textarea">{{ prompts['handler_instructions_topics'] }}</textarea>
                                        </span>
                                    </div>
                                    <hr>
                                    <h4 class="title is-6 is-thin">Handler Actions Provided Instructions</h4>
                                    <div class="box-line">
                                        <span class="left">Action Selection</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="9" name="handler_action" class="textarea">{{ prompts['handler_action'] }}</textarea>
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left">Post</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="5" name="handler_post" class="textarea">{{ prompts['handler_post'] }}</textarea>
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left">News</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="18" name="handler_news" class="textarea">{{ prompts['handler_news'] }}</textarea>
                                        </span>
                                    </div>
                                     <div class="box-line">
                                        <span class="left">Comment</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="17" name="handler_comment" class="textarea">{{ prompts['handler_comment'] }}</textarea>
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left">Comment Image</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="9" name="handler_comment_image" class="textarea">{{ prompts['handler_comment_image'] }}</textarea>
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left">Share</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="20" name="handler_share" class="textarea">{{ prompts['handler_share'] }}</textarea>
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left">Reactions</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="9" name="handler_reactions" class="textarea">{{ prompts['handler_reactions'] }}</textarea>
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left">Follow</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="10" name="handler_follow" class="textarea">{{ prompts['handler_follow'] }}</textarea>
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left">Cast Vote</span>
                                        <span class="right" style="width: 70%;">
                                            <textarea rows="10" name="handler_cast" class="textarea">{{ prompts['handler_cast'] }}</textarea>
                                        </span>
                                    </div>

                                </div>
                                <div class="button-wrap">
                                    <button class="button is-solid primary-button is-fullwidth">
                                        Update
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!--Dashboard box-->

                </div>


                <!--Dashboard column-->
                <div class="column is-4">
                    <!--Box-->
                    <div class="dashboard-box is-compact">
                        <h3 class="title is-5 is-thin">Guide</h3>
                        <div class="help-block">
                            <p>
                                <b>A dialogue for two.</b><br>
                                To simulate a synthetic agent actions YSocial creates a chat between two entities: <br><br>
                                <em>The Agent</em>: which has to generate text or taking decisions leveraging its profile;<br>
                                <em>The Handler</em>: which provides instructions to the agent and evaluate its results (e.g., identifying article topics, elicited emotions).
                            </p>
                            <hr>
                            <p>
                                <b>Prompts Customization</b>
                                Prompts can access agent profile variables and can be customized to fit the specific needs of the simulation using the synthax <code>{ variable }</code>.<br>
                                Here is the list of available variables:
                            </p>
                        </div>
                        <div class="box-content">
                                <div class="box-lines">
                                    Agent features
                                    <div class="box-line">
                                        <span class="left"><code>{self.name}</code></span>
                                        <span class="right" style="width: 40%;">
                                            The agent name.
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{self.age}</code></span>
                                        <span class="right" style="width: 40%;">
                                            The agent age.
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{self.nationality}</code></span>
                                        <span class="right" style="width: 40%;">
                                            The agent nationality.
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{self.gender}</code></span>
                                        <span class="right" style="width: 40%;">
                                            The agent gender.
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{self.profession}</code></span>
                                        <span class="right" style="width: 40%;">
                                            The agent profession.
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{self.leaning}</code></span>
                                        <span class="right" style="width: 40%;">
                                            The agent political leaning.
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{','.join(interest)}</code></span>
                                        <span class="right" style="width: 40%;">
                                            A subset of agent's interests.
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{self.education_level}</code></span>
                                        <span class="right" style="width: 40%;">
                                            The agent education level.
                                        </span>
                                    </div>
                                          <div class="box-line">
                                        <span class="left"><code>{self.toxicity}</code></span>
                                        <span class="right" style="width: 40%;">
                                            The agent expected toxicity.
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{self.language}</code></span>
                                        <span class="right" style="width: 40%;">
                                            The agent spoken language.
                                        </span>
                                    </div>
                                    <br>
                                    Big-5 Personality Traits
                                    <div class="box-line">
                                        <span class="left"><code>{self.oe}</code></span>
                                        <span class="right" style="width: 40%;">
                                            Openness to Experience.
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{self.co}</code></span>
                                        <span class="right" style="width: 40%;">
                                            Conscientiousness.
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{self.ex}</code></span>
                                        <span class="right" style="width: 40%;">
                                            Extraversion.
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{self.ag}</code></span>
                                        <span class="right" style="width: 40%;">
                                            Agreeableness.
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{self.ne}</code></span>
                                        <span class="right" style="width: 40%;">
                                            Neuroticism.
                                        </span>
                                    </div>

                                    <br>
                                    News Pages
                                    <div class="box-line">
                                        <span class="left"><code>{website.name}</code></span>
                                        <span class="right" style="width: 40%;">
                                            The Website name.
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{website.leaning}</code></span>
                                        <span class="right" style="width: 40%;">
                                            The Website political leaning (if available).
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{article.title}</code></span>
                                        <span class="right" style="width: 40%;">
                                            The Article title.
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{article.summary}</code></span>
                                        <span class="right" style="width: 40%;">
                                            The Article summary.
                                        </span>
                                    </div>
                                    <br>
                                    Contents
                                    <div class="box-line">
                                        <span class="left"><code>{descr}</code></span>
                                        <span class="right" style="width: 40%;">
                                            The image textual description.
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{post_text}</code></span>
                                        <span class="right" style="width: 40%;">
                                            The post text.
                                        </span>
                                    </div>
                                    <div class="box-line">
                                        <span class="left"><code>{conv}</code></span>
                                        <span class="right" style="width: 40%;">
                                            A discussion thread.
                                        </span>
                                    </div>

                                </div>
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>

</div>

{% include "admin/footer.html" %}